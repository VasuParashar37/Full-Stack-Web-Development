<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissor</title>
    <link rel="stylesheet" href="RPS.css">
  </head>
  <body>
    <p>Rock Paper Scissor</p>
    <button onclick="resultCalculator('Rock')">Rock</button>
    <button onclick="resultCalculator('Paper')">Paper</button>
    <button onclick="resultCalculator('Scissor')">Scissor</button>
    
    <p class="move-selected"></p>
    <p class="result"></p>
    <p class="score"></p>

    <button onclick="data.Lose=0;data.Wins=0;data.Tie=0
    alert('Score is now reset.')
    localStorage.removeItem('score')
    updateScore()
    updateResult()"
    >Reset</button>

    <p id="data-container"></p>

    <script>
      // removing the code so that local storage data can come
      // const data = {
      //   'Wins':0,
      //   'Lose':0,
      //   'Tie':0
      // };

      let data = JSON.parse(localStorage.getItem('scoreData')) || {
          Wins:0,
          Lose:0,
          Tie:0
        };

        updateScore();

      // if(!data){
      //   data={
      //     Wins:0,
      //     Lose:0,
      //     Tie:0
      //   };
      // }

      function resultCalculator(userMove) {
        const resultCalculator = computerMoveCalculator();

        document.querySelector('.move-selected').innerHTML =  `Your Move: ${userMove}. Computer's Move: ${resultCalculator}.`

        let result = "";
        if (userMove == resultCalculator) {
          result = `Its a Tie.`;
          data.Tie=data.Tie+1;
        } else if (
          (userMove === "Rock" && resultCalculator === "Scissor") ||
          (userMove === "Scissor" && resultCalculator === "Paper") ||
          (userMove === "Paper" && resultCalculator === "Rock")
        ) {
          result = `You Win`;
          data.Wins = data.Wins+1;
        } else{
            result = "Computer Wins";
            data.Lose = data.Lose+1;
        }

        localStorage.setItem('scoreData',JSON.stringify(data));
        
        updateScore();
        document.querySelector('.result').innerHTML = result;

        alert(
        `Your Move: ${userMove}. Computer's Move: ${resultCalculator}. So.. ${result}
         Wins:${data.Wins}, Lose:${data.Lose}, Tie:${data.Tie}`
        );
      }

      function updateScore(){
        document.querySelector('.score').innerHTML = `Wins:${data.Wins}, Lose:${data.Lose}, Tie:${data.Tie}`;
      }

      function computerMoveCalculator() {
        const randomNumber = Math.random();
        let resultCalculator = null;

        if (randomNumber < 1 / 3) resultCalculator = "Rock";
        else if (randomNumber < 2 / 3) resultCalculator = "Paper";
        else resultCalculator = "Scissor";

        return resultCalculator;
      }
    </script>
  </body>
</html>
